<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Hi! Welcome to my website!</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="about_files/libs/clipboard/clipboard.min.js"></script>
<script src="about_files/libs/quarto-html/quarto.js"></script>
<script src="about_files/libs/quarto-html/popper.min.js"></script>
<script src="about_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="about_files/libs/quarto-html/anchor.min.js"></script>
<link href="about_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="about_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="about_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="about_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="about_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Hi! Welcome to my website!</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Hi there! My name is Sienna White and I am a Ph.D.&nbsp;student at UC Berkeley (2021 - 2026, hopefully!), working with Professor Mark Stacey. I’ve written up some of my research experience below. For a more formal CV, see here. I’m grateful to be funded by the Computational Science Graduate Fellowship through DOE. Please feel free to reach out to me at any time (thoughts on research! potential collaboration! application review for the CSGF! egregious typos on this site!) at <em>sienna w at berkeley dot edu</em> .</p>
<p><img src="/images/headshot.jpeg" class="img-fluid"></p>
<section id="research-experiences" class="level2">
<h2 class="anchored" data-anchor-id="research-experiences">RESEARCH EXPERIENCES</h2>
</section>
<section id="predicting-harmful-algal-blooms-in-the-sacramento-san-joaquin-delta-dissertation-research" class="level2">
<h2 class="anchored" data-anchor-id="predicting-harmful-algal-blooms-in-the-sacramento-san-joaquin-delta-dissertation-research">Predicting harmful algal blooms in the Sacramento-San Joaquin Delta (Dissertation Research)</h2>
<p>Water quality in the San Francisco Bay Delta affects regional water resources, ecosystem health, and quality of life for any of the two million people who interact with the Delta or call its shores home. However, water management in the Delta has become a heavily politicized issue, as large-scale water withdrawal for agriculture and state water projects often comes at the cost of ecosystem protection measures.</p>
<p>The Delta receives large inputs of anthropogenic nutrients from wastewater treatment plants which result in elevated dissolved inorganic nitrogen levels (Novick et al., 2015). This nutrient-enriched status places the Delta at high risk for algal blooms (Paerl, 2009; Dahm et al., 2016), including risk for bloom events with toxic, or harmful algal species (commonly referred to as harmful algal blooms, or HAB events). These harmful algal blooms threaten public health and endanger the potability of the water supply. Furthermore, climate change, reduced sediment load, and increased nutrient delivery have accelerated algal bloom activity, resulting in increased harmful algal bloom events (Lehman et al., 2017).</p>
<p>My PhD research will focus on using numerical models to investigate the specific mechanisms that precipitate harmful algal blooms, which likely involves a “goldilocks zone” of wind-driven mixing, tidal forcing, river outflow, nutrient supply, and temperature. Better understanding what conditions allow Microcystis (a harmful algal species) to dominate over “beneficial algal species” (diatoms) will then be used to inform a prediction framework, providing water managers with much-needed visibility of where (and when) harmful algal blooms are likely to occur.</p>
</section>
<section id="data-assimilation-for-wildfire-smoke-models" class="level2">
<h2 class="anchored" data-anchor-id="data-assimilation-for-wildfire-smoke-models">Data assimilation for wildfire smoke models</h2>
<p>During my first year at UC Berkeley (2021-2022), I decided to try my hand at atmospheric modeling and was lucky enough to do so under the mentorship of <a href="https://chow.ce.berkeley.edu">Prof.&nbsp;Tina Chow</a> and Dr.&nbsp;Rebecca Segrue. I worked on <em>“Partnering for Resilient Opportunities To Eliminate Cumulative Toxic (PROTECT) Health Effects from Wildfire PM2.5 in Environmental Justice Communities,”</em> an EPA Region 9 grant involving a consortium of scientists from Berkeley, LBNL, and UCSF. The overreaching goal of this grant was to explore how long-term exposure to wildfire smoke has impacted public health in environmental justice communitiies. In order to do so, our team focused on assimilating observational data into modeled wildfire smoke fields to generate an hourly “best guess” of smoke concentrations across California from 2016-2020. These results were then passed off to public health researchers for exposure analysis. You can <a href="https://cfpub.epa.gov/ncer_abstracts/index.cfm/fuseaction/display.abstractDetail/abstract_id/11358/report/0">learn more about the overall grant here</a>. For me, it was a great opportunity work directly with researchers in the public health/medical space and gain a broader persepctive on the utility (and lack thereof) of numerical modeling for providing input data to other disciplines.</p>
<section id="background-on-data-assimilation" class="level3">
<h3 class="anchored" data-anchor-id="background-on-data-assimilation">Background on data assimilation</h3>
<p>Data assimilation is a statistical exercise that attempts to address the very useful question of “how can we combine observational data with model results when we know there are errors in both methods?” (If it’s useful to anyone, I might come back later and add a better explanation here – please reach out!). It’s commonly employed in weather forecasting, as weather forecasts have extraordinary sensitivity to their initial condition – so everytime you restart a weather model, it makes sense to check what your model is saying and what measurements-on-the-ground report. I found this <a href="https://www.osti.gov/pages/servlets/purl/1737509">paper by Ahmed et al.&nbsp;(2020)</a> to be a very accessible, well-explained walkthrough on what this looks like mathematically.</p>
<p>As it turns out, unbeknownest to me, meteorologists have mastered data assimilation for both static fields (e.g., generating intial conditions) with all sorts of data, including satellite irradiance and weather balloon data with a host of methodologies (3-D Var, Ensemble Kalman Filter, etc) Beyond looking at a snapshot in time, there’s also a data assimilation practice known as “4D-Var” which incorporates observational data into a model as it’s running. For this exercise, I stuck to the simplest possible implementation of data assimilation, and with the very patient guidance of our collaborators at NOAA was able to deploy the Gridpoint Statistical Interpolation tool (GSI) for 3D-Var assimilation.</p>
</section>
<section id="our-methodology" class="level3">
<h3 class="anchored" data-anchor-id="our-methodology">Our methodology</h3>
<p>For our “background field” (e.g, initial model result) we used simulations from HRRR-Smoke, an implementation of the high-resolution rapid refresh model that includes smoke as a tracer. We started with raw GRIB2 model output and used WPS/WRF utilites to prepare an input file for GSI. Most of this work involved developing efficient pipelines for processing enormous quantities of data. We then assimilated observational data from EPA AirNow sensors as well as Purple Air. (One ongoing question of this research involves how best to quantify the observational error in Purple Air sensors when assimilation these data into the modeled smoke field.) You can see an example of this assimilated smoke field here.</p>
<p>INSERT IMAGE!</p>
<p>If this dataset is interesting to you, or if you’d like me to share the python repositories I developed to perform and automate this process, please reach out.</p>
</section>
</section>
<section id="biogeochemical-hydrodynamic-modeling-with-the-san-francisco-estuary-institute" class="level2">
<h2 class="anchored" data-anchor-id="biogeochemical-hydrodynamic-modeling-with-the-san-francisco-estuary-institute">Biogeochemical + hydrodynamic modeling with the San Francisco Estuary Institute</h2>
<p>Before starting grad school at Berkeley, I worked for two years at the San Francisco Estuary Institute on the <a href="https://www.sfei.org/programs/projects#">Clean Water</a> program under Dr.&nbsp;David Senn. Our team used computational models to study nutrient cycling and primary productivity in the Bay Area. We maintained two DFlow-FM hydrodynamic models of San Francisco Bay (one focused on resolving the Sacramento-San Joaquin Delta) coupled to an offline biogeochemical module (Delft Water Quality, also known as DELWAQ). My work focused mainly on calibrating and validating our model(s) for a range of water years, as well as post-processing model results to communicate with stakeholders.</p>
<p>Our work is publicly available here and here, but it’s ocassinally hard to find, so please reach out if you have any questions or want to learn more – our work is open source and I’m happy to talk about San Francisco Bay dynamics truly anytime !</p>
</section>
<section id="river-morphology-work" class="level2">
<h2 class="anchored" data-anchor-id="river-morphology-work">River morphology work</h2>
<p>From 2019-2020 I was awarded a Fulbright to perform river morphology research at the Technische Universiteit Delft with Prof.&nbsp;Astrid Blom. I worked on a project examining the effect of fixed beds (an engineering river intervention) on wide-scale morphodynamics on the Waal River using computational geospatial analysis in Python, QGIS, and MATLAB. This project involved close collaboration with Rijkswaterstaat, the Dutch water ministry.</p>
<ul>
<li>link fixed layers report</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="/images/radius_NM_annotation.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Labeled fixed bed</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="/images/nijmegen_pic_stand_1.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Fieldwork on San Francisco Bay</figcaption>
</figure>
</div>
</section>
<section id="sediment-transport-in-san-francisco-bay" class="level2">
<h2 class="anchored" data-anchor-id="sediment-transport-in-san-francisco-bay">Sediment transport in San Francisco Bay</h2>
<ul>
<li>link honors thesis</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="/images/IMG_6533.jpg" class="img-fluid figure-img" width="800"></p>
<figcaption class="figure-caption">Fieldwork on San Francisco Bay</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="/images/waves.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Most of the waves in South Francisco Bay are fetch-limited. We parameterized their effects by modifying the shear stress.</figcaption>
</figure>
</div>
<p>I’m interested in environmental fluid mechanics, computational fluid modeling, estuarine physics, sediment dynamics …. benthic grazers … etc. I finally got around to making a website, so if you found your way here, either on purpose or accident, I’m glad you made it! Feel free to reach out.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="/images/headshot.jpeg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Here is what I look like</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="/images/headshot.jpeg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Here is what I look like</figcaption>
</figure>
</div>
<p>Hi there! My name is Sienna White and I am a Ph.D.&nbsp;student at UC Berkeley, working with Professor <a href="https://chow.ce.berkeley.edu/">Tina Chow</a> on data assimilation for smoke modeling. I’m interested in environmental fluid mechanics, computational fluid modeling, estuarine physics, sediment dynamics …. benthic grazers … etc.</p>
<p>Before I started my PhD at Berkeley, I worked for two years at the San Francisco Estuary Institute on the Clean Water team under Dr.&nbsp;David Senn. At SFEI, I used computational models to study nutrient cycling and primary productivity in the Bay Area. We ran our hydrodynamic model using DFlow-FM and our biogeochemical module was coupled offline using Delft Water Quality (DELWAQ). Our work is publicly available here and here, but it’s ocassinally hard to find, so please reach out if you have any questions or want to learn more – our work is open source and I’m happy to talk about San Francisco Bay dynamics truly anytime !</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="/images/headshot.jpeg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Here is what I look like</figcaption>
</figure>
</div>
</section>
<section id="section" class="level1">
<h1></h1>
</section>
<section id="work-on-san-francisco-bay-and-the-delta" class="level1">
<h1>Work on San Francisco Bay and the Delta</h1>
<p>Provide a brief introduction to your science project. Explain the purpose and goals of your project, and provide some background information on the topic you are studying.</p>
<p>knitr::include_graphics(/images/gp.jpg) ```</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="/images/headshot.jpeg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Here is what I look like</figcaption>
</figure>
</div>
</section>
<section id="hypothesis" class="level1">
<h1>Hypothesis</h1>
<p>State your hypothesis, and explain your reasoning for why you believe it to be true.</p>
</section>
<section id="methods" class="level1">
<h1>Methods</h1>
<p>Describe the methods you used to conduct your experiment or investigation. This should include a description of the materials you used, the procedures you followed, and any other important details.</p>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<p>Present your results in the form of tables and plots. Make sure to label your axes and provide any necessary legends or captions. You may want to use R code chunks to generate your plots. Here’s an example of how to do that:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="/images/gp.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Here is what I look like</figcaption>
</figure>
</div>
</section>
<section id="a-data-driven-personal-website" class="level1">
<h1>A data-driven personal website</h1>
<p>Like many other Jekyll-based GitHub Pages templates, academicpages makes you separate the website’s content from its form. The content &amp; metadata of your website are in structured markdown files, while various other files constitute the theme, specifying how to transform that content &amp; metadata into HTML pages. You keep these various markdown (.md), YAML (.yml), HTML, and CSS files in a public GitHub repository. Each time you commit and push an update to the repository, the <a href="https://pages.github.com/">GitHub pages</a> service creates static HTML pages based on these files, which are hosted on GitHub’s servers free of charge.</p>
<p>Many of the features of dynamic content management systems (like Wordpress) can be achieved in this fashion, using a fraction of the computational resources and with far less vulnerability to hacking and DDoSing. You can also modify the theme to your heart’s content without touching the content of your site. If you get to a point where you’ve broken something in Jekyll/HTML/CSS beyond repair, your markdown files describing your talks, publications, etc. are safe. You can rollback the changes or even delete the repository and start over – just be sure to save the markdown files! Finally, you can also write scripts that process the structured data on the site, such as <a href="https://github.com/academicpages/academicpages.github.io/blob/master/talkmap.ipynb">this one</a> that analyzes metadata in pages about talks to display <a href="https://academicpages.github.io/talkmap.html">a map of every location you’ve given a talk</a>.</p>
</section>
<section id="getting-started" class="level1">
<h1>Getting started</h1>
<ol type="1">
<li>Register a GitHub account if you don’t have one and confirm your e-mail (required!)</li>
<li>Fork <a href="https://github.com/academicpages/academicpages.github.io">this repository</a> by clicking the “fork” button in the top right.</li>
<li>Go to the repository’s settings (rightmost item in the tabs that start with “Code”, should be below “Unwatch”). Rename the repository “[your GitHub username].github.io”, which will also be your website’s URL.</li>
<li>Set site-wide configuration and create content &amp; metadata (see below – also see <a href="http://archive.is/3TPas">this set of diffs</a> showing what files were changed to set up <a href="https://getorg-testacct.github.io">an example site</a> for a user with the username “getorg-testacct”)</li>
<li>Upload any files (like PDFs, .zip files, etc.) to the files/ directory. They will appear at https://[your GitHub username].github.io/files/example.pdf.<br>
</li>
<li>Check status by going to the repository settings, in the “GitHub pages” section</li>
</ol>
<section id="site-wide-configuration" class="level2">
<h2 class="anchored" data-anchor-id="site-wide-configuration">Site-wide configuration</h2>
<p>The main configuration file for the site is in the base directory in <a href="https://github.com/academicpages/academicpages.github.io/blob/master/_config.yml">_config.yml</a>, which defines the content in the sidebars and other site-wide features. You will need to replace the default variables with ones about yourself and your site’s github repository. The configuration file for the top menu is in <a href="https://github.com/academicpages/academicpages.github.io/blob/master/_data/navigation.yml">_data/navigation.yml</a>. For example, if you don’t have a portfolio or blog posts, you can remove those items from that navigation.yml file to remove them from the header.</p>
</section>
<section id="create-content-metadata" class="level2">
<h2 class="anchored" data-anchor-id="create-content-metadata">Create content &amp; metadata</h2>
<p>For site content, there is one markdown file for each type of content, which are stored in directories like _publications, _talks, _posts, _teaching, or _pages. For example, each talk is a markdown file in the <a href="https://github.com/academicpages/academicpages.github.io/tree/master/_talks">_talks directory</a>. At the top of each markdown file is structured data in YAML about the talk, which the theme will parse to do lots of cool stuff. The same structured data about a talk is used to generate the list of talks on the <a href="https://academicpages.github.io/talks">Talks page</a>, each <a href="https://academicpages.github.io/talks/2012-03-01-talk-1">individual page</a> for specific talks, the talks section for the <a href="https://academicpages.github.io/cv">CV page</a>, and the <a href="https://academicpages.github.io/talkmap.html">map of places you’ve given a talk</a> (if you run this <a href="https://github.com/academicpages/academicpages.github.io/blob/master/talkmap.py">python file</a> or <a href="https://github.com/academicpages/academicpages.github.io/blob/master/talkmap.ipynb">Jupyter notebook</a>, which creates the HTML for the map based on the contents of the _talks directory).</p>

<style type="text/css" rel="stylesheet">
.column {
  float: left;
  width: 50%;
  padding: 5px;
}

/* Clear floats after image containers */
.row::after {
  content: "";
  clear: both;
  display: table;
}
</style>
<p><strong>Markdown generator</strong></p>
<p>I have also created <a href="https://github.com/academicpages/academicpages.github.io/tree/master/markdown_generator">a set of Jupyter notebooks</a> that converts a CSV containing structured data about talks or presentations into individual markdown files that will be properly formatted for the academicpages template. The sample CSVs in that directory are the ones I used to create my own personal website at stuartgeiger.com. My usual workflow is that I keep a spreadsheet of my publications and talks, then run the code in these notebooks to generate the markdown files, then commit and push them to the GitHub repository.</p>
</section>
<section id="how-to-edit-your-sites-github-repository" class="level2">
<h2 class="anchored" data-anchor-id="how-to-edit-your-sites-github-repository">How to edit your site’s GitHub repository</h2>
<p>Many people use a git client to create files on their local computer and then push them to GitHub’s servers. If you are not familiar with git, you can directly edit these configuration and markdown files directly in the github.com interface. Navigate to a file (like <a href="https://github.com/academicpages/academicpages.github.io/blob/master/_talks/2012-03-01-talk-1.md">this one</a> and click the pencil icon in the top right of the content preview (to the right of the “Raw | Blame | History” buttons). You can delete a file by clicking the trashcan icon to the right of the pencil icon. You can also create new files or upload files by navigating to a directory and clicking the “Create new file” or “Upload files” buttons.</p>
<p>Example: editing a markdown file for a talk <img src="../images/editing-talk.png" class="img-fluid" alt="Editing a markdown file for a talk"></p>
</section>
<section id="for-more-info" class="level2">
<h2 class="anchored" data-anchor-id="for-more-info">For more info</h2>
<p>More info about configuring academicpages can be found in <a href="https://academicpages.github.io/markdown/">the guide</a>. The <a href="https://mmistakes.github.io/minimal-mistakes/docs/configuration/">guides for the Minimal Mistakes theme</a> (which this theme was forked from) might also be helpful.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>